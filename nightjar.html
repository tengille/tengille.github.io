<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>tengille | nightjar</title>
  <style>
    img {
      margin-top: 10px;
    }

    h3 {
      cursor: pointer;
    }

    a {
      border-bottom: 1px solid purple;
      font-style: italic;
      text-decoration: none;
    }

    a:visited {
      color: #000;
    }

    blockquote {
      background-color: #DDD;
      font-style: italic;
      margin: 0;
      max-width: 600px;
      padding: 10px;
    }
  </style>
</head>

<body>
  <blockquote>
    You're that ninja...
  </blockquote>

  <img src="./images/nightjar-title.gif" width="200px" />

  <p><i>This will eventually be its own repository, but for now its just a webpage.</i></p>

  <h2>Nightjar</h2>
  <p>
    Nightjar, affectionately named after <a href="https://en.wikipedia.org/wiki/Nightjar">the stealthy bird</a>,
    and to a lesser extent the <a href="https://sekiro-shadows-die-twice.fandom.com/wiki/Nightjar">
    ninjas in Sekiro</a>, is a "Metal Gear-like" game. I've always enjoyed that series and this is
    an attempt to create something akin to it. I am making it in GameMaker.
  </p>

  <h4>Resources</h4>
  <ul>
    <li><a href="https://www.youtube.com/watch?v=Us5GSddVedY">How To Create A Main Menu In GameMaker</a></li>
    <li><a href="https://www.youtube.com/watch?v=qTqDY4JtFfo">How to Make a Top Down Shooter in GameMaker Studio 2! (Part 1: Movement and Collision)</a></li>
    <li><a href="https://www.youtube.com/watch?v=xLasKr0ekHY">How to Make a Menu System (with Submenus) in GameMaker Studio 2!</a></li>
    <li><a href="https://www.youtube.com/watch?v=cqYngvVuRdg">How to Make a Top Down Shooter in GameMaker Studio 2! (Part 2: Sprite Control)</a></li>
  </ul>
  <div>... and a lot of random Reddit pages / YoYo Games forums / posting in Discord servers</div>

  <h4>Devlog</h4>

  <h5>10 jan 2024</h5>

  <iframe width="560" height="315" src="https://www.youtube.com/embed/234c48DzAn0?si=_t60gPckvU3OpSxt"
    title="YouTube video player" frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    allowfullscreen></iframe>

  <p>
    I was able to get 8 way movement pretty quickly. One thing that was interesting was navigating how
    the player iterates between states.
  </p>

  <pre><code>
    // create event
    enum PLAYER_STATE {
      STAND = 0,
      RUN = 1,
      CROUCH = 2,
      CRAWL = 3,
    };

    // step event
    if state == PLAYER_STATE.STAND {
      if _x_key { state = PLAYER_STATE.CROUCH; }
      if moving { state = PLAYER_STATE.RUN; }
    }
    else if state == PLAYER_STATE.CROUCH {
      if _x_key { state = PLAYER_STATE.STAND; }
      if moving { state = PLAYER_STATE.CRAWL; }
    }
    else if state == PLAYER_STATE.RUN {
      if !moving { state = PLAYER_STATE.STAND; }
      if _x_key { state = PLAYER_STATE.CROUCH; }
    }
    else if state == PLAYER_STATE.CRAWL {
      if _x_key { state = PLAYER_STATE.CROUCH; }
    }
  </code></pre>

  <p>
    While reasonably concise, it took a minute to get to that step. Navigating when the player could
    crouch and what their options where from there, the same for crawling and running (effectively standing),
    was all a bit interesting.
  </p>

  <p>Another hurdle was navigating how to do idle sprites, facing the correct way.</p>

  <pre><code>
    // create event
    run_sprite[0] = spr_player_run_right;
    run_sprite[1] = spr_player_run_up_right;
    run_sprite[2] = spr_player_run_up;
    run_sprite[3] = spr_player_run_up_left;
    run_sprite[4] = spr_player_run_left;
    run_sprite[5] = spr_player_run_down_left;
    run_sprite[6] = spr_player_run_down;
    run_sprite[7] = spr_player_run_down_right;
  </code></pre>

  <p>
    And this exists for... <code>idle_stand_sprite</code>, <code>idle_crouch_sprite</code>, and <code>crawl_sprite</code>.
    Crawling was actually a bit easy because we just stop animating. We end up doing a mixture of storing
    the direction we're facing, in conjunction with which way we're currently moving, if we're moving.
    This may be deserving of a refactor, in the future, if needed.
  </p>

  <pre><code>
    if moving == 0 {
      if state == PLAYER_STATE.CROUCH {
        sprite_index = idle_crouch_sprite[direction_state];
      }
      else if state == PLAYER_STATE.STAND || state == PLAYER_STATE.RUN {
        sprite_index = idle_stand_sprite[direction_state];
      }
      else if state == PLAYER_STATE.CRAWL {
        sprite_index = crawl_sprite[direction_state];
      }
    }

    if moving == 1 {
      if state == PLAYER_STATE.RUN {
        sprite_index = run_sprite[sprite_pointer];
      }
      else if state == PLAYER_STATE.CRAWL {
        sprite_index = crawl_sprite[sprite_pointer];
      }
    }
  </code></pre>

  <p>
    Overall, I'm quite pleased with the amount of progress in approximately a week. My duolingo'ing has
    suffered a little but, that's ok, for now. Additionally, having basic collision allows me to be able
    to eventually test basic levels. Up next, I'll work on moving between rooms, adding a "main menu",
    and will move onto more player based things such as taking damage, attacking enemies, being seen
    by enemmies, etc. One thing that will have to happen is I will need to hire a pixel artist to reskin
    the game, and that will require a bit of reworking on sprites. They look a little janky at times,
    as I am just pulling them from <a href="https://www.spriters-resource.com/game_boy_gbc/mggb/">The Spriter's Resource (a great site)</a>.
    I would like to hire someone to do a little cutscene art, as well as some music, potentially remixes
    of existing MG songs. Nothing overly expesnive or "fancy" but it could eventually add a level of
    polish I know I'd like.
  </p>

</body>

</html>
